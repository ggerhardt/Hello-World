openapi: 3.0.1
info:
  title: Catálogo de Dados Abertos de Instituições Financeiras
  description: |
    Lista conjuntos de informação disponibilizados pelas IF como Dados Abertos
  version: 0.1.1
  contact:
    email: "apiteam??@bcb.gov.br"
  license:
    name: "Open Database License (ODbL)"
    url: "http://opendefinition.org/licenses/odc-odbl/"
paths:
  /catalogo:
    get:
      operationId: buscarCatalogo
      description: "Retorna informações sobre a instituição e sobre os conjuntos de\
        \ dados publicados como Dados Abertos.\n\nAlgumas informações são opcionais"
      responses:
        200:
          description: Resposta bem sucedida
          content:
            'application/json:':
              schema:
                $ref: '#/components/schemas/catalogo'
              examples:
                exemplo1:
                  $ref:  '#/components/examples/Banco%20XYZ'
                exemplo2:
                  $ref: '#/components/examples/Banco%20abc'
      x-code-samples:
        - lang: 'C#'
          source: |
            PetStore.v1.Pet pet = new PetStore.v1.Pet();
            pet.setApiKey("your api key");
            pet.petType = PetStore.v1.Pet.TYPE_DOG;
            pet.name = "Rex";
            // set other fields
            PetStoreResponse response = pet.create();
            if (response.statusCode == HttpStatusCode.Created)
            {
              // Successfully created
            }
            else
            {
              // Something wrong -- check response for errors
              Console.WriteLine(response.getRawResponse());
            }
        - lang: PHP
          source: "$form = new \\PetStore\\Entities\\Pet();\n$form->setPetType(\"Dog\");\n$form->setName(\"Rex\");\n// set other fields\ntry {\n    $pet = $client->pets()->create($form);\n} catch (UnprocessableEntityException $e) {\n    var_dump($e->getErrors());\n}\n"

components:
  schemas:
    catalogo:
      type: object
      title: Catálogo de conjuntos de dados abertos
      description: Catálogo com informações dos conjuntos de dados abertos publicados pela instituição financeira.
      required:
        - codigo
        - nome
        - dataUltimaAtualizacao
        - contatoArea
        - contatoEmail
        - conjuntos
      properties:
        codigo:
          oneOf:
            - type: string
              title: CNPJ
              description: 'codigo CNPJ de 8 dígitos, formatado.'
              example: 01.010.101
              pattern: '^[0-9]{2}.[0-9]{3}.[0-9]{3}$'
            - type: string
              title: Código do Conglomerado Prudencial ou da instituição
              description: Identificação do Conglomerado Prudencial ou Instituição.
              example: A0000000
              pattern: '^[A-Z]{1}[0-9]{7}$'        
        nome:
          type: string
          title: Nome da IF
          description: Nome da Instituição Financeira.
          example: Banco Xyz
          maxLength: 50
          pattern: ^(.*)$
        dataUltimaAtualizacao:
          type: string
          format: date
          title: Data da última atualização
          description: 'Data da última atualização destas informações, no formato yyyy-mm-dd.'
          example: '2019-06-11'
        contatoArea:
          type: string
          title: Área de Contato
          description: Nome da área de contato para tratar problemas nos dados.
          example: Ouvidoria
          maxLength: 50
          pattern: ^(.*)$
        contatoEmail:
          type: string
          format: email
          title: E-mail de contato
          description: E-mail da área de contato para tratar problemas nos dados.
          example: ouvid@bancoxyz.com.br
        conjuntos:
          type: array
          title: Conjuntos de dados
          description: Lista de conjuntos de dados disponibilizados.
          items:
            title: Item do catálogo - API
            type: object
            description: Cada conjunto de dado faz referência a uma API publicada e indica onde ela está disponibilizada.
            required:
              - ref
              - nome
              - urlBase
              - urlVisualizacao
              - situacao
              - recursos
            properties:
              ref:
                type: string
                format: uri
                title: Link para especificação da API
                description: Referência para especificação da API no site do Banco Central
                example: 'https://www.bcb.gov.br/dadosabertos/apis/pilar3/1.0.0/especificacao'
                maxLength: 150
              nome:
                type: string
                title: Nome da API
                description: Nome da API, conforme definido na especificação.
                example: Basiléia - PillarIII
                maxLength: 200
                pattern: ^(.*)$
              urlBase:
                type: string
                format: uri
                title: URL de base
                description: Indica o caminho base da implementação da API na IF.
                example: 'http://dadosabertos.bancoxyz.com.br/pillar/1.0/'
              urlVisualizacao:
                type: string
                format: uri
                title: URL de visualização
                description: Url que aponta para visualização dos dados no site da instituição.
                example: 'https://bancoxyz.com.br/ConsultaPillarIII'
              situacao:
                type: string
                title: Situação da API
                description: Indica o estado do desenvolvimento da API. Somente APIs marcadas como em 'Produção' são consideradas como publicadas.
                enum:
                  - Desenvolvimento
                  - Homologação
                  - Produção
                  - Descontinuada
                example: Produção
                maxLength: 20
                pattern: ^(.*)$
              recursos:
                type: array
                title: Lista de recursos da API
                description: Lista com os recursos implementados e publicados pela instituição
                items:
                  type: object
                  title: Recurso da API
                  description: Recurso implementado pela IF.
                  required:
                    - caminhoRecurso
                  properties:
                    caminhoRecurso:
                      type: string
                      format: uri
                      title: Caminho do recurso
                      description: Identificação do recurso implementado, conforme API.
                      example: '/KM1/{periodo}'
                      maxLength: 100
                    periodos:
                      oneOf:
                        - type: array
                          title: Lista de períodos com publicação
                          description: Para recursos com períodos definidos na norma, indica períodos com informação disponível.
                          items:
                            type: string
                            title: Período publicado
                            description: Período publicado, conforme norma definida.
                            example: '201901'
                            maxLength: 50
                            pattern: ^(.*)$
                        - type: string
                          format: uri
                          title: URL Períodos Disponíveis
                          description: Para recursos com períodos definidos na norma, indica URL que retorna array de períodos disponíveis.
                          example: '/KM1/Periodos'
                          maxLength: 100
                    periodicidade:
                      type: string
                      title: Periodicidade
                      description: Se houver periodicidade de atualização dos dados definida, indica qual é.
                      example: semestral
                      maxLength: 50
                      pattern: ^(.*)$
              contatoArea:
                type: string
                title: Área de Contato API
                description: Nome da área de contato para tratar problemas nos dados específicos desta API. Se não preenchido o contato considerado é o definido no catálogo.
                example: Financeiro
                maxLength: 50
                pattern: ^(.*)$
              contatoEmail:
                type: string
                format: email
                title: E-mail de contato API
                description: E-mail da área de contato para tratar problemas nos dados desta API. Se não preenchido o contato considerado é o definido no catálogo.
                example: pillarIII@bancoxyz.com
  examples:
    Banco XYZ:
      summary: Banco XYZ
      description: descrição do exemplo do banco xyz
      value: 
        codigo: 99.99.999
        nome: Banco Xyz
        dataUltimaAtualizacao: '2019-06-11'
        contatoArea: Ouvidoria
        contatoEmail: ouvid@bancoxyz.com.br
        conjuntos:
        - ref: https://www.bcb.gov.br/dadosabertos/apis/pilar3/1.0.0/especificacao
          nome: Basiléia - PillarIII
          urlBase: http://dadosabertos.bancoxyz.com.br/pillar/1.0/
          urlVisualizacao: https://bancoxyz.com.br/ConsultaPillarIII
          situacao: Produção
          recursos:
          - caminhoRecurso: "/KM1/{periodo}"
            periodos:
            - '201901'
            periodicidade: semestral
          contatoArea: Financeiro
          contatoEmail: pillarIII@bancoxyz.com      
    Banco abc:
      description: descrição do exemplo do banco abc
      summary: Banco abc
      value: 
        codigo: A2232222
        nome: Banco Xyz
        dataUltimaAtualizacao: '2019-06-11'
        contatoArea: Ouvidoria
        contatoEmail: ouvid@bancoxyz.com.br
        conjuntos:
        - ref: https://www.bcb.gov.br/dadosabertos/apis/pilar3/1.0.0/especificacao
          nome: Basiléia - PillarIII
          urlBase: http://dadosabertos.bancoxyz.com.br/pillar/1.0/
          urlVisualizacao: https://bancoxyz.com.br/ConsultaPillarIII
          situacao: Produção
          recursos:
          - caminhoRecurso: "/KM1/{periodo}"
            periodos:
            - '201901'
            periodicidade: semestral
          contatoArea: Financeiro
          contatoEmail: pillarIII@bancoxyz.com                
   
